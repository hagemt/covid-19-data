/* eslint-env browser */
/* global google */

const v1 = {
	date: '2020-08-08',
	rows: [
		['State', '% positive tests'],
['Alabama',17.64],
['Alaska',1.71],
['Arizona',15.53],
['Arkansas',11.50],
['California',5.70],
['Colorado',7.18],
['Connecticut',0.72],
['Delaware',4.78],
['Florida',17.74],
['Georgia',12.69],
['Hawaii',6.65],
['Idaho',16.09],
['Illinois',4.10],
['Indiana',8.75],
['Iowa',9.57],
['Kansas',11.77],
['Kentucky',6.73],
['Louisiana',7.66],
['Maine',0.62],
['Maryland',5.71],
['Massachusetts',2.74],
['Michigan',2.55],
['Minnesota',6.22],
['Mississippi',20.45],
['Missouri',10.70],
['Montana',4.45],
['Nebraska',8.96],
['Nevada',17.37],
['New Hampshire',1.95],
['New Jersey',1.53],
['New Mexico',2.63],
['New York',0.96],
['North Carolina',5.84],
['North Dakota',7.31],
['Ohio',4.86],
['Oklahoma',9.58],
['Oregon',6.40],
['Pennsylvania',5.23],
['Rhode Island',5.99],
['South Carolina',12.25],
['South Dakota',8.56],
['Tennessee',8.63],
['Texas',16.20],
['Utah',10.53],
['Vermont',0.52],
['Virginia',8.16],
['Washington',13.68],
['West Virginia',2.76],
['Wisconsin',6.16],
['Wyoming',8.24],
	],
}

const v2 = {
	date: '2020-08-15',
	rows: [
		['State', '% positive tests'],
['Alabama',10.60],
['Alaska',2.15],
['Arizona',10.63],
['Arkansas',11.72],
['California',6.53],
['Colorado',3.93],
['Connecticut',0.79],
['Delaware',7.05],
['Florida',17.15],
['Georgia',10.55],
['Hawaii',7.63],
['Idaho',16.56],
['Illinois',4.06],
['Indiana',9.19],
['Iowa',9.73],
['Kansas',12.24],
['Kentucky',7.68],
['Louisiana',6.05],
['Maine',0.47],
['Maryland',4.90],
['Massachusetts',1.79],
['Michigan',2.34],
['Minnesota',7.17],
['Mississippi',23.05],
['Missouri',10.94],
['Montana',6.48],
['Nebraska',9.05],
['Nevada',16.71],
['New Hampshire',1.36],
['New Jersey',1.75],
['New Mexico',2.63],
['New York',0.85],
['North Carolina',6.22],
['North Dakota',9.13],
['Ohio',5.04],
['Oklahoma',8.08],
['Oregon',5.58],
['Pennsylvania',5.12],
['Rhode Island',5.02],
['South Carolina',7.90],
['South Dakota',8.96],
['Tennessee',7.78],
['Texas',16.37],
['Utah',8.47],
['Vermont',0.82],
['Virginia',6.24],
['West Virginia',2.63],
['Wisconsin',7.51],
['Wyoming',5.44],
	],
}

const v3 = {
	date: '2020-09-16',
	rows: [
		['State', '% positive tests'],
['Alabama',16.15],
['Alaska',3.81],
['Arizona',6.92],
['Arkansas',5.20],
['California',3.35],
['Colorado',3.40],
['Connecticut',1.20],
['Delaware',8.14],
['Florida',12.34],
['Georgia',9.79],
['Hawaii',3.29],
['Idaho',16.38],
['Illinois',3.62],
['Indiana',6.21],
['Iowa',13.51],
['Kansas',13.76],
['Kentucky',3.45],
['Louisiana',3.98],
['Maine',0.61],
['Maryland',6.44],
['Massachusetts',0.77],
['Michigan',2.92],
['Minnesota',8.14],
['Mississippi',15.84],
['Missouri',10.88],
['Montana',4.19],
['Nebraska',9.40],
['Nevada',8.61],
['New Hampshire',2.68],
['New Jersey',1.93],
['New Mexico',2.22],
['New York',0.95],
['North Carolina',4.52],
['North Dakota',5.85],
['Ohio',3.57],
['Oklahoma',6.85],
['Oregon',4.92],
['Pennsylvania',6.77],
['Rhode Island',1.10],
['South Carolina',12.48],
['South Dakota',16.91],
// why is Texas is absent?
['Tennessee',5.76],
['Utah',12.03],
['Vermont',1.00],
['Virginia',6.96],
['Washington',3.15],
['West Virginia',4.72],
['Wisconsin',14.56],
['Wyoming',4.05],
	],
}

const v4 = {
	date: '2020-09-17',
	rows: [
		['State', '% positive tests'],
['Alabama',15.74],
['Alaska',3.46],
['Arizona',5.68],
['Arkansas',8.01],
['California',3.57],
['Colorado',3.47],
['Connecticut',1.28],
['Delaware',7.76],
['Florida',12.47],
['Georgia',9.32],
['Hawaii',3.25],
['Idaho',16.47],
['Illinois',3.75],
['Indiana',6.09],
['Iowa',13.65],
['Kansas',15.17],
['Kentucky',3.20],
['Louisiana',3.45],
['Maine',0.64],
['Maryland',6.40],
['Massachusetts',0.77],
['Michigan',2.73],
['Minnesota',8.18],
['Mississippi',14.85],
['Missouri',10.82],
['Montana',4.53],
['Nebraska',10.56],
['Nevada',8.07],
['New Hampshire',2.66],
['New Jersey',1.95],
['New Mexico',2.30],
['New York',0.94],
['North Carolina',4.39],
['North Dakota',5.63],
['Ohio',3.45],
['Oklahoma',8.58],
['Oregon',5.07],
['Pennsylvania',6.46],
['Rhode Island',1.22],
['South Carolina',12.43],
['South Dakota',14.62],
['Tennessee',5.97],
['Texas',9.44],
['Utah',13.06],
['Vermont',0.94],
['Virginia',6.65],
['Washington',3.02],
['West Virginia',4.63],
['Wisconsin',14.70],
['Wyoming',8.08],
	],
}

const v5 = {
	date: '2020-09-18',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-18T11:45:09.760962)
//date on rows: This page was last updated on Friday, September 18, 2020 at 03:00 AM EDT.
['Alabama',13.55],
['Alaska',1.57],
['Arizona',15.80],
['Arkansas',8.53],
['California',5.93],
['Colorado',5.48],
['Connecticut',3.96],
['Delaware',7.23],
['District of Columbia',4.36],
['Florida',13.47],
['Georgia',11.27],
['Hawaii',4.16],
['Idaho',12.82],
['Illinois',5.51],
['Indiana',8.54],
['Iowa',11.03],
['Kansas',10.93],
['Kentucky',5.72],
['Louisiana',7.51],
['Maine',1.44],
['Maryland',7.95],
['Massachusetts',4.01],
['Michigan',3.91],
['Minnesota',6.85],
['Mississippi',14.42],
['Missouri',9.26],
['Montana',3.23],
['Nebraska',9.64],
['Nevada',11.43],
['New Hampshire',3.33],
['New Jersey',6.11],
['New Mexico',3.25],
['New York',4.68],
['North Carolina',7.01],
['North Dakota',3.06],
['Ohio',5.22],
['Oklahoma',7.03],
['Oregon',4.80],
['Pennsylvania',8.19],
['Puerto Rico',11.12],
['Rhode Island',3.57],
['South Carolina',12.41],
['South Dakota',10.19],
['Tennessee',6.96],
['Texas',13.15],
['Utah',8.19],
['Vermont',1.12],
['Virginia',7.55],
['Washington',4.82],
['West Virginia',2.67],
['Wisconsin',6.61],
['Wyoming',5.07],
	]
}

const v6 = {
	date: '2020-09-19',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-19T00:00:08.749371)
//date on rows: This page was last updated on Friday, September 18, 2020 at 03:00 AM EDT.
['Arizona',15.80],
['Mississippi',14.42],
['Alabama',13.55],
['Florida',13.47],
['Texas',13.15],
['Idaho',12.82],
['South Carolina',12.41],
['Nevada',11.43],
['Georgia',11.27],
['Puerto Rico',11.12],
['Iowa',11.03],
['Kansas',10.93],
['South Dakota',10.19],
['Nebraska',9.64],
['Missouri',9.26],
['Indiana',8.54],
['Arkansas',8.53],
['Pennsylvania',8.19],
['Utah',8.19],
['Maryland',7.95],
['Virginia',7.55],
['Louisiana',7.51],
['Delaware',7.23],
['Oklahoma',7.03],
['North Carolina',7.01],
['Tennessee',6.96],
['Minnesota',6.85],
['Wisconsin',6.61],
['New Jersey',6.11],
['California',5.93],
['Kentucky',5.72],
['Illinois',5.51],
['Colorado',5.48],
['Ohio',5.22],
['Wyoming',5.07],
['Washington',4.82],
['Oregon',4.80],
['New York',4.68],
['District of Columbia',4.36],
['Hawaii',4.16],
['Massachusetts',4.01],
['Connecticut',3.96],
['Michigan',3.91],
['Rhode Island',3.57],
['New Hampshire',3.33],
['New Mexico',3.25],
['Montana',3.23],
['North Dakota',3.06],
['West Virginia',2.67],
['Alaska',1.57],
['Maine',1.44],
['Vermont',1.12],
	],
}

const v7 = {
	date: '2020-09-20',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-20T00:00:18.494616)
//date on rows: This page was last updated on Saturday, September 19, 2020 at 03:00 AM EDT.
['Arizona',15.64],
['Mississippi',14.51],
['Alabama',13.57],
['Florida',13.46],
['Texas',13.12],
['Idaho',12.88],
['South Carolina',12.45],
['Nevada',11.43],
['Puerto Rico',11.27],
['Georgia',11.23],
['Kansas',11.02],
['Iowa',11.01],
['South Dakota',10.31],
['Nebraska',9.67],
['Missouri',9.29],
['Indiana',8.56],
['Arkansas',8.54],
['Utah',8.25],
['Pennsylvania',8.17],
['Maryland',7.93],
['Virginia',7.51],
['Louisiana',7.50],
['Delaware',7.23],
['Oklahoma',7.05],
['North Carolina',6.99],
['Tennessee',6.94],
['Minnesota',6.87],
['Wisconsin',6.68],
['New Jersey',6.07],
['California',5.92],
['Kentucky',5.72],
['Illinois',5.49],
['Colorado',5.47],
['Ohio',5.21],
['Wyoming',5.09],
['Oregon',4.80],
['Washington',4.80],
['New York',4.65],
['District of Columbia',4.33],
['Hawaii',4.18],
['Massachusetts',3.94],
['Connecticut',3.93],
['Michigan',3.90],
['Rhode Island',3.53],
['New Hampshire',3.31],
['Montana',3.27],
['New Mexico',3.25],
['North Dakota',3.09],
['West Virginia',2.70],
['Alaska',1.57],
['Maine',1.41],
['Vermont',1.11],
	],
}

const v8 = {
	date: '2020-09-21',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-21T00:00:17.464083)
//date on rows: This page was last updated on Sunday, September 20, 2020 at 03:00 AM EDT.
['Arizona',15.63],
['Mississippi',14.59],
['Alabama',13.75],
['Florida',13.45],
['Idaho',13.08],
['Texas',12.94],
['South Carolina',12.26],
['Puerto Rico',11.48],
['Nevada',11.44],
['Georgia',11.21],
['Iowa',11.14],
['Kansas',10.98],
['South Dakota',10.41],
['Nebraska',9.69],
['Missouri',9.36],
['Indiana',8.56],
['Arkansas',8.55],
['Utah',8.30],
['Pennsylvania',8.16],
['Maryland',7.91],
['Virginia',7.57],
['Louisiana',7.47],
['Delaware',7.21],
['Oklahoma',7.07],
['North Carolina',6.95],
['Tennessee',6.93],
['Wisconsin',6.86],
['New Jersey',6.04],
['California',5.92],
['Kentucky',5.75],
['Illinois',5.47],
['Colorado',5.46],
['Ohio',5.18],
['Wyoming',5.14],
['Minnesota',4.90],
['Oregon',4.82],
['Washington',4.79],
['New York',4.61],
['District of Columbia',4.28],
['Hawaii',4.17],
['Connecticut',3.90],
['Michigan',3.88],
['Massachusetts',3.88],
['Rhode Island',3.50],
['Montana',3.31],
['New Mexico',3.24],
['North Dakota',3.13],
['West Virginia',2.72],
['New Hampshire',2.00],
['Alaska',1.59],
['Maine',1.37],
['Vermont',1.11],
	],
}

const v9 = {
	date: '2020-09-22',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-22T00:00:23.740574)
//date on rows: This page was last updated on Monday, September 21, 2020 at 03:00 AM EDT.
['Arizona',15.55],
['Alabama',13.75],
['Florida',13.44],
['Mississippi',13.24],
['Idaho',13.06],
['Texas',12.73],
['South Carolina',12.22],
['Puerto Rico',11.82],
['Nevada',11.41],
['Iowa',11.18],
['Georgia',11.15],
['Kansas',11.06],
['South Dakota',10.53],
['Nebraska',9.72],
['Missouri',9.38],
['Arkansas',8.68],
['Indiana',8.57],
['Utah',8.36],
['Pennsylvania',8.13],
['Maryland',7.89],
['Virginia',7.47],
['Louisiana',7.47],
['Delaware',7.21],
['Oklahoma',7.07],
['North Carolina',6.94],
['Tennessee',6.91],
['Wisconsin',6.80],
['New Jersey',6.05],
['California',5.87],
['Kentucky',5.83],
['Colorado',5.45],
['Illinois',5.44],
['Wyoming',5.18],
['Ohio',5.15],
['Minnesota',4.89],
['Oregon',4.83],
['Washington',4.82],
['New York',4.57],
['District of Columbia',4.25],
['Hawaii',4.05],
['Connecticut',3.90],
['Michigan',3.86],
['Massachusetts',3.81],
['Rhode Island',3.50],
['Montana',3.38],
['New Mexico',3.23],
['North Dakota',3.16],
['West Virginia',2.73],
['New Hampshire',2.01],
['Alaska',1.59],
['Maine',1.36],
['Vermont',1.10],
	],
}

const v10 = {
	date: '2020-09-23',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-23T00:00:08.285410)
//date on rows: This page was last updated on Tuesday, September 22, 2020 at 03:00 AM EDT.
['Arizona',15.46],
['Alabama',13.75],
['Florida',13.42],
['Mississippi',13.28],
['Idaho',13.07],
['Texas',12.75],
['South Carolina',12.16],
['Puerto Rico',12.02],
['Nevada',11.40],
['Iowa',11.20],
['Georgia',11.13],
['Kansas',11.10],
['South Dakota',10.60],
['Nebraska',9.70],
['Missouri',9.42],
['Arkansas',8.57],
['Indiana',8.56],
['Utah',8.41],
['Pennsylvania',8.11],
['Maryland',7.85],
['Virginia',7.46],
['Louisiana',7.40],
['Delaware',7.21],
['Oklahoma',7.16],
['Wisconsin',7.03],
['North Carolina',6.90],
['Tennessee',6.88],
['New Jersey',5.96],
['Kentucky',5.87],
['California',5.81],
['Colorado',5.42],
['Illinois',5.41],
['Wyoming',5.27],
['Ohio',5.11],
['Minnesota',4.90],
['Oregon',4.84],
['Washington',4.79],
['New York',4.53],
['District of Columbia',4.21],
['Hawaii',4.08],
['Connecticut',3.90],
['Michigan',3.86],
['Massachusetts',3.75],
['Rhode Island',3.50],
['Montana',3.40],
['New Mexico',3.22],
['North Dakota',3.19],
['West Virginia',2.74],
['New Hampshire',1.98],
['Alaska',1.60],
['Maine',1.36],
['Vermont',1.10],
	],
}

const v11 = {
	date: '2020-09-24',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-24T00:00:10.697825)
//date on rows: This page was last updated on Wednesday, September 23, 2020 at 03:00 AM EDT.
['Arizona',15.40],
['Alabama',13.76],
['Florida',13.40],
['Mississippi',13.24],
['Idaho',13.11],
['Texas',13.07],
['Puerto Rico',12.19],
['South Carolina',12.07],
['Nevada',11.40],
['Iowa',11.23],
['Georgia',11.09],
['Kansas',11.07],
['South Dakota',10.66],
['Nebraska',9.72],
['Missouri',9.47],
['Arkansas',8.57],
['Indiana',8.56],
['Utah',8.45],
['Pennsylvania',8.12],
['Maryland',7.84],
['Virginia',7.43],
['Louisiana',7.39],
['Oklahoma',7.26],
['Delaware',7.20],
['Wisconsin',7.09],
['North Carolina',6.90],
['Tennessee',6.88],
['New Jersey',5.97],
['Kentucky',5.85],
['California',5.78],
['Colorado',5.41],
['Illinois',5.40],
['Wyoming',5.25],
['Ohio',5.08],
['Minnesota',4.90],
['Oregon',4.85],
['Washington',4.76],
['New York',4.51],
['District of Columbia',4.19],
['Hawaii',4.07],
['Michigan',3.85],
['Connecticut',3.82],
['Massachusetts',3.72],
['Rhode Island',3.47],
['Montana',3.35],
['North Dakota',3.22],
['New Mexico',3.21],
['West Virginia',2.73],
['New Hampshire',1.98],
['Alaska',1.61],
['Maine',1.36],
['Vermont',1.09],
	],
}

const v12 = {
	date: '2020-09-25',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-25T00:00:07.611015)
//date on rows: This page was last updated on Thursday, September 24, 2020 at 03:00 AM EDT.
['Arizona',15.34],
['Alabama',13.76],
['Florida',13.40],
['Mississippi',13.20],
['Idaho',13.18],
['Texas',13.09],
['Puerto Rico',12.22],
['South Carolina',12.01],
['Nevada',11.40],
['Iowa',11.26],
['Kansas',11.14],
['Georgia',11.08],
['South Dakota',10.76],
['Nebraska',9.76],
['Missouri',9.39],
['Arkansas',8.57],
['Indiana',8.56],
['Utah',8.46],
['Pennsylvania',8.11],
['Maryland',7.83],
['Virginia',7.42],
['Louisiana',7.35],
['Delaware',7.19],
['Oklahoma',7.18],
['Wisconsin',7.14],
['North Carolina',6.92],
['Tennessee',6.88],
['New Jersey',5.90],
['Kentucky',5.87],
['California',5.75],
['Colorado',5.41],
['Illinois',5.39],
['Wyoming',5.29],
['Ohio',5.05],
['Minnesota',4.90],
['Oregon',4.87],
['Washington',4.79],
['New York',4.48],
['District of Columbia',4.15],
['Hawaii',4.08],
['Michigan',3.84],
['Connecticut',3.80],
['Massachusetts',3.68],
['Rhode Island',3.45],
['Montana',3.41],
['North Dakota',3.26],
['New Mexico',3.21],
['West Virginia',2.75],
['New Hampshire',1.95],
['Alaska',1.61],
['Maine',1.37],
['Vermont',1.09],
	],
}

const v13 = {
	date: '2020-09-26',
	rows: [
		['State', '% positive tests'],
//GET https://coronavirus.jhu.edu/testing/states-comparison/testing-state-totals-bypop (path=None, when=2020-09-26T00:00:08.955270)
//date on rows: This page was last updated on Friday, September 25, 2020 at 06:20 AM EDT.
['Arizona',15.27],
['Alabama',13.74],
['Florida',13.39],
['Idaho',13.26],
['Mississippi',13.20],
['Texas',12.94],
['Puerto Rico',12.24],
['South Carolina',11.90],
['Nevada',11.43],
['Iowa',11.32],
['Kansas',11.14],
['Georgia',11.06],
['South Dakota',10.90],
['Nebraska',9.81],
['Missouri',9.50],
['Arkansas',8.60],
['Indiana',8.57],
['Utah',8.49],
['Pennsylvania',8.10],
['Maryland',7.81],
['Virginia',7.41],
['Louisiana',7.33],
['Oklahoma',7.19],
['Wisconsin',7.19],
['Delaware',7.18],
['North Carolina',6.91],
['Tennessee',6.88],
['New Jersey',5.87],
['California',5.74],
['Wyoming',5.44],
['Colorado',5.41],
['Illinois',5.38],
['Kentucky',5.22],
['Ohio',5.00],
['Minnesota',4.91],
['Oregon',4.88],
['Washington',4.81],
['New York',4.46],
['District of Columbia',4.14],
['Hawaii',4.12],
['Michigan',3.83],
['Connecticut',3.78],
['Massachusetts',3.70],
['Montana',3.44],
['Rhode Island',3.42],
['North Dakota',3.30],
['New Mexico',3.21],
['West Virginia',2.76],
['New Hampshire',1.94],
['Alaska',1.62],
['Maine',1.34],
['Vermont',1.10],
	],
}

/*
// update index.html w/ new YYYY-MM-DD div(s)
const vN = {
	date: 'YYYY-MM-DD',
	rows: [
		['State', '% positive tests'],
// ...
	]
}
*/

// see: states/scrape.py (for data after v4 = 2020-09-18)
const versions = Object.freeze(
	[v1, v2, v3, v4, v5, v6, v7, v8, v9, v10, v11, v12, v13])

// https://developers.google.com/chart/interactive/docs/basic_load_libs#load-settings
google.charts.load('current', {
	mapsApiKey: 'AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY',
	packages: ['geochart'],
});

google.charts.setOnLoadCallback(() => {
	const options = {
		colorAxis: {
			colors: ['#719949', '#ff9e1b'],
			maxValue: 15,
			minValue: 0,
		},
		displayMode: 'regions',
		region: 'US',
		resolution: 'provinces',
	}

	for (const { date, rows } of versions) {
		const div = document.getElementById('r' + date);
		const chart = new google.visualization.GeoChart(div);
		const data = google.visualization.arrayToDataTable(rows);
		chart.draw(data, options);
	}
})

window.charts = Object.freeze({
	hide: (date) => {
		const charts = document.getElementById('charts');
		const chart = document.getElementById('s' + date);
		if (chart.style.display === 'none') {
			return false;
		}

		const btn = document.createElement('button');
		btn.innerHTML = 'Show ' + date;
		btn.onclick = () => {
			chart.style.display = 'block';
			charts.removeChild(btn);
			return false;
		}

		btn.style.display = 'block';
		chart.style.display = 'none';
		charts.appendChild(btn);
		return false;
	},
	hideAll: () => {
		for (const { date } of versions) {
			window.charts.hide(date);
		}
		return false;
	},
	showAll: () => {
		location.reload();
		return false;
	},
})

// EOF
